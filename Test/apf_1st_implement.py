import numpy as np
import matplotlib.pyplot as plt
from scipy.ndimage import gaussian_filter1d

# def attractive_potential(q, goal, k_att):
#     return 0.5 * k_att * np.linalg.norm(q - goal) ** 2

# def repulsive_potential(q, obstacles, k_rep, d0):
#     U_rep = 0
#     for obs in obstacles:
#         d = np.linalg.norm(q - obs)
#         if d <= d0:
#             U_rep += 0.5 * k_rep * (1/d - 1/d0) ** 2
#     return U_rep




# def total_potential(q, goal, obstacles, k_att, k_rep, d0):
#     return attractive_potential(q, goal, k_att) + repulsive_potential(q, obstacles, k_rep, d0)


# def gradient(q, goal, obstacles, k_att, k_rep, d0, epsilon=1e-3):
#     grad = np.zeros_like(q)
#     for i in range(len(q)):
#         q_step = q.copy()
#         q_step[i] += epsilon  # Small step in dimension i
#         grad[i] = (total_potential(q_step, goal, obstacles, k_att, k_rep, d0) - total_potential(q, goal, obstacles, k_att, k_rep, d0)) / epsilon
    
#     grad = -grad  # Move in the negative gradient direction
    
#     # Limit step size to 1
#     if np.linalg.norm(grad) > (1/15):
#         grad = grad / np.linalg.norm(grad)
    
#     return grad
import random

# def gradient(q, goal, obstacles, k_att, k_rep, d0, epsilon=1e-3):
#     grad = np.zeros_like(q)
#     for i in range(len(q)):
#         q_step = q.copy()
#         q_step[i] += epsilon  # Small step in dimension i
#         grad[i] = (total_potential(q_step, goal, obstacles, k_att, k_rep, d0) - total_potential(q, goal, obstacles, k_att, k_rep, d0)) / epsilon
    
#     grad = -grad  # Move in the negative gradient direction

#     # If stuck in a local minimum, apply a small random perturbation
#     # if np.linalg.norm(grad) < 1e-3:  
#     #     grad += np.array([random.uniform(-0.5, 0.5), random.uniform(-0.5, 0.5)])

    

#     # Limit step size
#     if np.linalg.norm(grad) > (1/15):
#         grad = grad / np.linalg.norm(grad)

#     return grad

# def apf_path_planning(start, goal, obstacles, k_att=0.0001, k_rep=100000.0, d0=50.0, step_size=15, max_iters=5000):
#     path = [start]
#     q = np.array(start, dtype=np.float64)
#     goal = np.array(goal, dtype=np.float64)
#     obstacles = np.array(obstacles, dtype=np.float64)
    
#     potential_values = []
    
#     for _ in range(max_iters):
#         grad = gradient(q, goal, obstacles, k_att, k_rep, d0)
#         q += step_size * grad  # Move based on gradient
#         path.append(q.copy())
#         potential_values.append(total_potential(q, goal, obstacles, k_att, k_rep, d0))
        
#         if np.linalg.norm(q - goal) < 0.1:  # Goal reached threshold
#             break
    
#     path = np.array(path)
#     path[:, 0] = gaussian_filter1d(path[:, 0], sigma=2)
#     path[:, 1] = gaussian_filter1d(path[:, 1], sigma=2)
    
#     return path, potential_values

import numpy as np
import matplotlib.pyplot as plt
from scipy.ndimage import gaussian_filter1d

def attractive_potential(q, goal, k_att):
    return 0.5 * k_att * np.linalg.norm(q - goal) ** 2

def repulsive_potential(q, obstacles, k_rep, d0):
    U_rep = 0
    rep_grad = np.zeros_like(q)  

    for obs in obstacles:
        d = np.linalg.norm(q - obs)
        if d <= d0:
            U_rep += 0.5 * k_rep * (1/d - 1/d0) ** 2

            # Compute repulsive gradient (force)
            grad_rep = k_rep * (1/d - 1/d0) * (1/d**2) * (q - obs) / d  

            # Add a small tangential force (perpendicular to gradient)
            tangent = np.array([-grad_rep[1], grad_rep[0]])  
            rep_grad += grad_rep + 5 * tangent  

    return U_rep, rep_grad

def total_potential(q, goal, obstacles, k_att, k_rep, d0):
    U_att = attractive_potential(q, goal, k_att)
    U_rep, _ = repulsive_potential(q, obstacles, k_rep, d0)  # Ignore gradient
    return U_att + U_rep

def gradient(q, goal, obstacles, k_att, k_rep, d0, epsilon=1e-3):
    grad = np.zeros_like(q)

    # Compute attractive gradient
    for i in range(len(q)):
        q_step = q.copy()
        q_step[i] += epsilon  # Small step in dimension i
        grad[i] = (total_potential(q_step, goal, obstacles, k_att, k_rep, d0) - total_potential(q, goal, obstacles, k_att, k_rep, d0)) / epsilon
    
    grad = -grad  # Move in the negative gradient direction

    # Compute repulsive gradient
    _, rep_grad = repulsive_potential(q, obstacles, k_rep, d0)

    # Combine attractive and repulsive gradients
    grad += rep_grad  
    # If stuck in a local minimum, apply a small random perturbation
    # if np.linalg.norm(grad) < 1e-3:  
    #     grad += np.array([random.uniform(-0.5, 0.5), random.uniform(-0.5, 0.5)])
    # Limit step size
    if np.linalg.norm(grad) > (1/15):
        grad = grad / np.linalg.norm(grad)

    return grad

def apf_path_planning(start, goal, obstacles, k_att=0.0001, k_rep=100000.0, d0=50.0, step_size=15, max_iters=5000):
    path = [start]
    q = np.array(start, dtype=np.float64)
    goal = np.array(goal, dtype=np.float64)
    obstacles = np.array(obstacles, dtype=np.float64)
    
    potential_values = []
    
    for _ in range(max_iters):
        grad = gradient(q, goal, obstacles, k_att, k_rep, d0)
        q += step_size * grad  # Move based on gradient
        path.append(q.copy())
        potential_values.append(total_potential(q, goal, obstacles, k_att, k_rep, d0))
        
        if np.linalg.norm(q - goal) < 0.1:  # Goal reached threshold
            break
    
    path = np.array(path)
    path[:, 0] = gaussian_filter1d(path[:, 0], sigma=2)
    path[:, 1] = gaussian_filter1d(path[:, 1], sigma=2)
    
    return path, potential_values


# Define start, goal, and obstacles
# start = [750, 300]
# goal = [750, 1000]
# obstacles = [
#   (773, 167), (772, 166), (771, 166), (770, 166), (771, 165), (770, 164), (769, 163), (768, 163), (769, 163), (770, 164), (771, 164), (772, 164), (773, 164), (774, 164), (775, 164), (774, 165), (775, 166), (774, 167),
#   (701, 416), (700, 415), (699, 414), (698, 413), (697, 412), (696, 411), (695, 410), (695, 409), (694, 408), (693, 407), (693, 406), (692, 405), (691, 404), (690, 403), (689, 402), (689, 401), (688, 400), (688, 399), (687, 398), (686, 397), (685, 396), (685, 395), (684, 394), (683, 393), (683, 392), (682, 391), (681, 390), (680, 389), (679, 388), (679, 387), (678, 386), (678, 385), (677, 384), (677, 383), (676, 382), (675, 381), (674, 380), (674, 379), (673, 378), (672, 377), (671, 376), (671, 375), (670, 374), (670, 373), (669, 372), (668, 371), (667, 370), (666, 369), (666, 368), (665, 367), (664, 366), (664, 365), (663, 364), (662, 363), (661, 362), (661, 361), (660, 360), (659, 359), (658, 358), (658, 357), (657, 356), (656, 355), (655, 354), (654, 353), (654, 352), (653, 351), (652, 350), (652, 349), (651, 348), (650, 347), (649, 346), (648, 345), (648, 344), (647, 343), (646, 342), (646, 341), (645, 340), (644, 339), (643, 338), (642, 337), (642, 336), (641, 335), (640, 334), (640, 333), (639, 332), (638, 331), (637, 330), (636, 329), (636, 328), (635, 327), (634, 326), (633, 325), (633, 324), (632, 323), (631, 322), (630, 321), (629, 320), (629, 319), (628, 318), (627, 317), (627, 316), (626, 315), (625, 314), (624, 313), (623, 312), (622, 311), (622, 310), (621, 309), (620, 308), (619, 307), (619, 306), (618, 305), (617, 304), (617, 303), (616, 302), (615, 301), (615, 300), (614, 299), (613, 298), (612, 297), (612, 296), (611, 295), (610, 294), (610, 293), (609, 292), (608, 291), (607, 290), (607, 289), (606, 288), (605, 287), (605, 286), (604, 285), (603, 284), (602, 283), (601, 282), (601, 281), (600, 280), (599, 279), (599, 278), (598, 277), (597, 276), (596, 275), (595, 274), (595, 273), (594, 272), (593, 271), (593, 270), (592, 269), (591, 268), (590, 267), (590, 266), (589, 265), (588, 264), (587, 263), (587, 262), (586, 261), (585, 260), (584, 259), (583, 258), (583, 257), (582, 256), (581, 255), (581, 254), (580, 253), (579, 252), (578, 251), (577, 250), (577, 249), (576, 248), (575, 247), (575, 246), (574, 245), (573, 244), (572, 243), (572, 242), (571, 241), (571, 240), (570, 239), (569, 238), (569, 237), (569, 236), (569, 235), (569, 234), (570, 233), (571, 233), (572, 232), (573, 232), (574, 231), (575, 230), (576, 229), (577, 229), (578, 228), (579, 227), (580, 227), (581, 226), (582, 225), (583, 225), (584, 224), (585, 223), (586, 223), (587, 222), (588, 221), (589, 220), (590, 219), (591, 219), (592, 218), (593, 217), (594, 216), (595, 215), (596, 215), (597, 214), (598, 213), (599, 213), (600, 213), (601, 213), (602, 213), (603, 214), (603, 215), (604, 216), (605, 217), (605, 218), (606, 219), (607, 220), (608, 221), (608, 222), (609, 223), (610, 224), (610, 225), (611, 226), (612, 227), (613, 228), (613, 229), (614, 230), (615, 231), (615, 232), (616, 233), (617, 234), (618, 235), (618, 236), (619, 237), (620, 238), (620, 239), (621, 240), (622, 241), (623, 242), (623, 243), (624, 244), (625, 245), (625, 246), (626, 247), (627, 248), (628, 249), (628, 250), (629, 251), (630, 252), (630, 253), (631, 254), (632, 255), (633, 256), (633, 257), (634, 258), (635, 259), (635, 260), (636, 261), (637, 262), (637, 263), (638, 264), (639, 265), (639, 266), (640, 267), (641, 268), (642, 269), (642, 270), (643, 271), (644, 272), (644, 273), (645, 274), (646, 275), (647, 276), (647, 277), (648, 278), (649, 279), (649, 280), (650, 281), (651, 282), (652, 283), (652, 284), (653, 285), (654, 286), (654, 287), (655, 288), (656, 289), (656, 290), (657, 291), (658, 292), (658, 293), (659, 294), (660, 295), (661, 296), (662, 297), (662, 298), (663, 299), (664, 300), (664, 301), (665, 302), (666, 303), (666, 304), (667, 305), (668, 306), (668, 307), (669, 308), (670, 309), (671, 310), (671, 311), (672, 312), (673, 313), (674, 314), (674, 315), (675, 316), (676, 317), (677, 318), (677, 319), (678, 320), (679, 321), (679, 322), (680, 323), (681, 324), (681, 325), (682, 326), (683, 327), (683, 328), (684, 329), (685, 330), (686, 331), (686, 332), (687, 333), (688, 334), (688, 335), (689, 336), (690, 337), (691, 338), (691, 339), (692, 340), (693, 341), (693, 342), (694, 343), (695, 344), (696, 345), (697, 346), (697, 347), (698, 348), (698, 349), (699, 350), (700, 351), (701, 352), (701, 353), (702, 354), (703, 355), (703, 356), (704, 357), (705, 358), (706, 359), (707, 360), (708, 360), (709, 360), (710, 360), (711, 359), (712, 358), (713, 358), (714, 357), (715, 356), (716, 355), (717, 355), (718, 354), (719, 354), (720, 353), (721, 352), (722, 351), (723, 350), (724, 350), (725, 349), (726, 348), (727, 348), (728, 347), (729, 346), (730, 345), (731, 345), (732, 344), (733, 344), (734, 343), (735, 342), (736, 341), (737, 341), (738, 340), (739, 339), (740, 339), (741, 338), (742, 337), (743, 337), (744, 336), (745, 335), (746, 335), (747, 334), (748, 333), (749, 332), (750, 332), (751, 331), (752, 330), (753, 330), (754, 329), (755, 328), (756, 328), (757, 327), (758, 326), (759, 326), (760, 325), (761, 324), (762, 323), (763, 323), (764, 322), (765, 321), (766, 321), (767, 320), (768, 319), (769, 319), (770, 318), (771, 317), (772, 316), (773, 316), (774, 315), (775, 314), (776, 314), (777, 313), (778, 312), (779, 312), (780, 311), (781, 310), (782, 309), (783, 309), (784, 308), (785, 307), (786, 306), (787, 305), (788, 305), (789, 304), (790, 303), (791, 302), (792, 301), (793, 301), (794, 300), (795, 299), (796, 298), (797, 298), (798, 297), (799, 296), (800, 295), (801, 295), (802, 294), (803, 293), (804, 293), (805, 292), (806, 291), (807, 291), (808, 290), (809, 289), (810, 289), (811, 288), (812, 287), (813, 287), (814, 286), (815, 285), (816, 285), (817, 284), (818, 283), (819, 282), (820, 282), (821, 281), (822, 280), (823, 280), (824, 279), (825, 278), (826, 277), (827, 276), (828, 276), (829, 275), (830, 274), (831, 273), (832, 273), (833, 272), (834, 271), (835, 270), (836, 270), (837, 269), (838, 268), (839, 267), (840, 267), (841, 267), (842, 268), (843, 268), (844, 269), (845, 270), (845, 271), (846, 272), (846, 273), (847, 274), (848, 275), (848, 276), (849, 277), (850, 278), (850, 279), (851, 280), (852, 281), (852, 282), (853, 283), (854, 284), (854, 285), (855, 286), (856, 287), (856, 288), (857, 289), (857, 290), (858, 291), (859, 292), (859, 293), (860, 294), (861, 295), (861, 296), (862, 297), (862, 298), (863, 299), (863, 300), (863, 301), (862, 302), (861, 303), (860, 303), (859, 304), (858, 305), (857, 306), (856, 306), (855, 307), (854, 308), (853, 308), (852, 309), (851, 310), (850, 311), (849, 312), (848, 312), (847, 313), (846, 314), (845, 314), (844, 315), (843, 316), (842, 317), (841, 317), (840, 318), (839, 319), (838, 319), (837, 320), (836, 321), (835, 322), (834, 322), (833, 323), (832, 324), (831, 325), (830, 325), (829, 326), (828, 327), (827, 327), (826, 328), (825, 329), (824, 330), (823, 330), (822, 331), (821, 332), (820, 333), (819, 333), (818, 334), (817, 335), (816, 335), (815, 336), (814, 337), (813, 337), (812, 338), (811, 339), (810, 339), (809, 340), (808, 341), (807, 342), (806, 342), (805, 343), (804, 343), (803, 344), (802, 345), (801, 346), (800, 346), (799, 347), (798, 348), (797, 349), (796, 349), (795, 350), (794, 351), (793, 352), (792, 353), (791, 353), (790, 354), (789, 355), (788, 355), (787, 356), (786, 357), (785, 358), (784, 359), (783, 359), (782, 360), (781, 361), (780, 361), (779, 362), (778, 363), (777, 364), (776, 365), (775, 365), (774, 366), (773, 367), (772, 368), (771, 368), (770, 369), (769, 370), (768, 370), (767, 371), (766, 372), (765, 373), (764, 373), (763, 374), (762, 375), (761, 376), (760, 376), (759, 377), (758, 378), (757, 378), (756, 379), (755, 380), (754, 381), (753, 381), (752, 382), (751, 383), (750, 383), (749, 384), (748, 385), (747, 386), (746, 387), (745, 387), (744, 388), (743, 389), (742, 389), (741, 390), (740, 391), (739, 391), (738, 392), (737, 393), (736, 393), (735, 394), (734, 395), (733, 396), (732, 396), (731, 397), (730, 398), (729, 399), (728, 399), (727, 400), (726, 401), (725, 402), (724, 402), (723, 403), (722, 404), (721, 404), (720, 405), (719, 406), (718, 407), (717, 407), (716, 408), (715, 409), (714, 409), (713, 410), (712, 411), (711, 411), (710, 412), (709, 413), (708, 414), (707, 414), (706, 415), (705, 416),
#   (692, 859), (691, 858), (690, 858), (689, 858), (688, 858), (687, 858), (686, 858), (685, 858), (684, 858), (683, 857), (682, 857), (681, 857), (680, 857), (679, 857), (678, 856), (677, 856), (676, 856), (675, 856), (674, 855), (673, 855), (672, 855), (671, 854), (670, 854), (669, 853), (668, 853), (667, 853), (666, 852), (665, 852), (664, 852), (663, 851), (662, 851), (661, 851), (660, 850), (659, 850), (658, 850), (657, 850), (656, 849), (655, 849), (654, 849), (653, 848), (652, 848), (651, 848), (650, 847), (649, 846), (648, 846), (647, 845), (646, 845), (645, 844), (644, 844), (643, 843), (642, 842), (641, 842), (640, 841), (639, 841), (638, 840), (637, 839), (636, 838), (635, 837), (634, 837), (633, 836), (632, 835), (631, 834), (630, 833), (630, 832), (629, 831), (628, 830), (628, 829), (627, 828), (626, 827), (625, 826), (625, 825), (624, 824), (624, 823), (623, 822), (623, 821), (623, 820), (622, 819), (622, 818), (621, 817), (621, 816), (621, 815), (620, 814), (620, 813), (620, 812), (619, 811), (619, 810), (619, 809), (618, 808), (618, 807), (617, 806), (617, 805), (617, 804), (616, 803), (616, 802), (616, 801), (616, 800), (615, 799), (615, 798), (615, 797), (615, 796), (614, 795), (614, 794), (614, 793), (614, 792), (614, 791), (613, 790), (613, 789), (613, 788), (613, 787), (613, 786), (613, 785), (613, 784), (613, 783), (613, 782), (613, 781), (613, 780), (614, 779), (614, 778), (614, 777), (614, 776), (614, 775), (614, 774), (614, 773), (614, 772), (615, 771), (615, 770), (615, 769), (615, 768), (616, 767), (616, 766), (616, 765), (616, 764), (617, 763), (617, 762), (618, 761), (618, 760), (618, 759), (619, 758), (619, 757), (620, 756), (620, 755), (620, 754), (621, 753), (621, 752), (622, 751), (622, 750), (623, 749), (623, 748), (624, 747), (624, 746), (625, 745), (626, 744), (626, 743), (627, 742), (628, 741), (629, 740), (629, 739), (630, 738), (631, 737), (631, 736), (632, 735), (633, 734), (634, 733), (635, 733), (636, 732), (637, 731), (638, 730), (639, 729), (640, 729), (641, 728), (642, 727), (643, 727), (644, 726), (645, 726), (646, 725), (647, 724), (648, 724), (649, 724), (650, 723), (651, 723), (652, 723), (653, 722), (654, 722), (655, 721), (656, 721), (657, 720), (658, 720), (659, 720), (660, 719), (661, 719), (662, 719), (663, 718), (664, 718), (665, 718), (666, 717), (667, 717), (668, 717), (669, 717), (670, 717), (671, 717), (672, 717), (673, 717), (674, 717), (675, 716), (676, 716), (677, 716), (678, 716), (679, 716), (680, 716), (681, 716), (682, 717), (683, 717), (684, 717), (685, 717), (686, 717), (687, 717), (688, 717), (689, 717), (690, 717), (691, 717), (692, 717), (693, 718), (694, 718), (695, 718), (696, 718), (697, 718), (698, 718), (699, 719), (700, 719), (701, 719), (702, 719), (703, 719), (704, 719), (705, 719), (706, 720), (707, 720), (708, 720), (709, 720), (710, 721), (711, 721), (712, 721), (713, 721), (714, 722), (715, 722), (716, 722), (717, 723), (718, 723), (719, 723), (720, 724), (721, 724), (722, 724), (723, 725), (724, 725), (725, 726), (726, 726), (727, 726), (728, 727), (729, 727), (730, 727), (731, 728), (732, 728), (733, 729), (734, 729), (735, 730), (736, 730), (737, 730), (738, 731), (739, 732), (740, 733), (741, 733), (742, 734), (743, 735), (744, 736), (745, 737), (746, 738), (747, 739), (748, 740), (749, 741), (750, 742), (751, 743), (752, 744), (752, 745), (753, 746), (754, 747), (754, 748), (755, 749), (755, 750), (755, 751), (756, 752), (757, 753), (757, 754), (757, 755), (757, 756), (757, 757), (758, 758), (758, 759), (758, 760), (758, 761), (758, 762), (758, 763), (758, 764), (759, 765), (759, 766), (759, 767), (759, 768), (759, 769), (759, 770), (759, 771), (760, 772), (760, 773), (760, 774), (760, 775), (760, 776), (760, 777), (760, 778), (760, 779), (760, 780), (759, 781), (759, 782), (759, 783), (759, 784), (759, 785), (759, 786), (758, 787), (758, 788), (758, 789), (758, 790), (757, 791), (757, 792), (756, 793), (756, 794), (756, 795), (755, 796), (755, 797), (755, 798), (755, 799), (754, 800), (754, 801), (754, 802), (753, 803), (753, 804), (753, 805), (752, 806), (752, 807), (751, 808), (751, 809), (751, 810), (750, 811), (749, 812), (748, 813), (748, 814), (747, 815), (747, 816), (746, 817), (745, 818), (744, 819), (743, 820), (743, 821), (742, 822), (742, 823), (741, 824), (740, 825), (739, 826), (739, 827), (738, 828), (737, 829), (737, 830), (736, 831), (735, 832), (734, 833), (733, 834), (732, 835), (732, 836), (731, 837), (730, 838), (729, 839), (728, 840), (728, 841), (727, 842), (726, 843), (726, 844), (725, 845), (725, 846), (724, 847), (723, 848), (722, 849), (721, 850), (720, 850), (719, 851), (718, 852), (717, 853), (716, 853), (715, 854), (714, 855), (713, 856), (712, 856), (711, 856), (710, 857), (709, 857), (708, 857), (707, 858), (706, 858), (705, 858), (704, 858), (703, 858), (702, 859),
  
#   (1245, 1037), (1244, 1036), (1243, 1036), (1242, 1036), (1241, 1036), (1240, 1036), (1239, 1036), (1238, 1036), (1237, 1036), (1236, 1036), (1235, 1036), (1234, 1035), (1233, 1035), (1232, 1035), (1231, 1035), (1230, 1035), (1229, 1035), (1228, 1035), (1227, 1035), (1226, 1034), (1225, 1034), (1224, 1034), (1223, 1034), (1222, 1034), (1221, 1034), (1220, 1034), (1219, 1034), (1218, 1034), (1217, 1034), (1216, 1033), (1215, 1033), (1214, 1033), (1213, 1033), (1212, 1033), (1211, 1033), (1210, 1033), (1209, 1033), (1208, 1033), (1207, 1033), (1206, 1033), (1205, 1032), (1204, 1032), (1203, 1032), (1202, 1032), (1201, 1032), (1200, 1032), (1199, 1032), (1198, 1032), (1197, 1032), (1196, 1032), (1195, 1032), (1194, 1031), (1193, 1031), (1192, 1031), (1191, 1031), (1190, 1031), (1189, 1031), (1188, 1031), (1187, 1031), (1186, 1031), (1185, 1031), (1184, 1031), (1183, 1031), (1182, 1031), (1181, 1030), (1180, 1030), (1179, 1030), (1178, 1030), (1177, 1030), (1176, 1030), (1175, 1030), (1174, 1030), (1173, 1030), (1172, 1030), (1171, 1030), (1170, 1029), (1169, 1029), (1168, 1029), (1167, 1029), (1166, 1029), (1165, 1029), (1164, 1029), (1163, 1029), (1162, 1029), (1161, 1029), (1160, 1029), (1159, 1029), (1158, 1029), (1157, 1029), (1156, 1029), (1155, 1028), (1154, 1028), (1153, 1028), (1152, 1028), (1151, 1028), (1150, 1028), (1149, 1028), (1148, 1028), (1147, 1028), (1146, 1028), (1145, 1028), (1144, 1028), (1143, 1028), (1142, 1028), (1141, 1028), (1140, 1028), (1139, 1028), (1138, 1028), (1137, 1028), (1136, 1028), (1135, 1028), (1134, 1028), (1133, 1028), (1132, 1028), (1131, 1028), (1130, 1028), (1129, 1028), (1128, 1028), (1127, 1028), (1126, 1028), (1125, 1028), (1124, 1028), (1123, 1028), (1122, 1028), (1121, 1027), (1120, 1027), (1119, 1027), (1118, 1027), (1117, 1027), (1116, 1027), (1115, 1027), (1114, 1027), (1113, 1027), (1112, 1027), (1111, 1027), (1110, 1027), (1109, 1027), (1108, 1027), (1107, 1027), (1106, 1026), (1105, 1026), (1104, 1026), (1103, 1026), (1102, 1026), (1101, 1026), (1100, 1026), (1099, 1026), (1098, 1026), (1097, 1026), (1096, 1026), (1095, 1026), (1094, 1026), (1093, 1026), (1092, 1026), (1091, 1026), (1090, 1026), (1089, 1025), (1088, 1025), (1087, 1025), (1086, 1025), (1085, 1025), (1084, 1025), (1083, 1025), (1082, 1025), (1081, 1025), (1080, 1025), (1079, 1025), (1078, 1025), (1077, 1025), (1076, 1025), (1075, 1025), (1074, 1025), (1073, 1025), (1072, 1026), (1071, 1026), (1070, 1026), (1069, 1025), (1068, 1025), (1068, 1024), (1067, 1023), (1067, 1022), (1067, 1021), (1067, 1020), (1067, 1019), (1067, 1018), (1067, 1017), (1068, 1016), (1068, 1015), (1068, 1014), (1068, 1013), (1068, 1012), (1068, 1011), (1068, 1010), (1068, 1009), (1068, 1008), (1068, 1007), (1068, 1006), (1068, 1005), (1068, 1004), (1068, 1003), (1068, 1002), (1068, 1001), (1068, 1000), (1068, 999), (1068, 998), (1068, 997), (1068, 996), (1068, 995), (1068, 994), (1068, 993), (1068, 992), (1068, 991), (1068, 990), (1068, 989), (1068, 988), (1068, 987), (1068, 986), (1068, 985), (1068, 984), (1069, 983), (1069, 982), (1069, 981), (1069, 980), (1069, 979), (1069, 978), (1069, 977), (1069, 976), (1070, 975), (1070, 974), (1070, 973), (1070, 972), (1070, 971), (1070, 970), (1070, 969), (1070, 968), (1070, 967), (1070, 966), (1070, 965), (1070, 964), (1070, 963), (1070, 962), (1070, 961), (1070, 960), (1070, 959), (1070, 958), (1070, 957), (1070, 956), (1070, 955), (1071, 954), (1071, 953), (1071, 952), (1071, 951), (1071, 950), (1071, 949), (1071, 948), (1071, 947), (1071, 946), (1071, 945), (1071, 944), (1071, 943), (1071, 942), (1071, 941), (1072, 940), (1072, 939), (1072, 938), (1072, 937), (1072, 936), (1072, 935), (1072, 934), (1072, 933), (1073, 932), (1073, 931), (1073, 930), (1073, 929), (1073, 928), (1073, 927), (1073, 926), (1073, 925), (1073, 924), (1073, 923), (1073, 922), (1073, 921), (1073, 920), (1073, 919), (1073, 918), (1073, 917), (1073, 916), (1073, 915), (1073, 914), (1073, 913), (1073, 912), (1073, 911), (1074, 910), (1074, 909), (1074, 908), (1074, 907), (1074, 906), (1074, 905), (1074, 904), (1074, 903), (1074, 902), (1074, 901), (1075, 900), (1075, 899), (1075, 898), (1075, 897), (1075, 896), (1075, 895), (1075, 894), (1075, 893), (1075, 892), (1075, 891), (1075, 890), (1075, 889), (1076, 888), (1076, 887), (1076, 886), (1076, 885), (1076, 884), (1076, 883), (1076, 882), (1076, 881), (1076, 880), (1076, 879), (1076, 878), (1076, 877), (1076, 876), (1076, 875), (1076, 874), (1076, 873), (1076, 872), (1076, 871), (1076, 870), (1076, 869), (1076, 868), (1076, 867), (1076, 866), (1076, 865), (1077, 864), (1077, 863), (1077, 862), (1077, 861), (1077, 860), (1077, 859), (1077, 858), (1077, 857), (1077, 856), (1077, 855), (1077, 854), (1077, 853), (1077, 852), (1077, 851), (1077, 850), (1077, 849), (1077, 848), (1077, 847), (1077, 846), (1077, 845), (1077, 844), (1077, 843), (1077, 842), (1077, 841), (1077, 840), (1077, 839), (1077, 838), (1077, 837), (1077, 836), (1077, 835), (1077, 834), (1077, 833), (1077, 832), (1077, 831), (1077, 830), (1077, 829), (1077, 828), (1077, 827), (1077, 826), (1077, 825), (1078, 824), (1078, 823), (1078, 822), (1078, 821), (1078, 820), (1078, 819), (1078, 818), (1078, 817), (1078, 816), (1078, 815), (1078, 814), (1078, 813), (1079, 812), (1079, 811), (1079, 810), (1079, 809), (1079, 808), (1079, 807), (1079, 806), (1079, 805), (1079, 804), (1079, 803), (1079, 802), (1079, 801), (1079, 800), (1079, 799), (1080, 798), (1080, 797), (1080, 796), (1080, 795), (1080, 794), (1080, 793), (1080, 792), (1080, 791), (1080, 790), (1080, 789), (1081, 788), (1081, 787), (1081, 786), (1081, 785), (1081, 784), (1081, 783), (1081, 782), (1081, 781), (1081, 780), (1082, 779), (1082, 778), (1082, 777), (1082, 776), (1082, 775), (1082, 774), (1083, 773), (1083, 772), (1083, 771), (1083, 770), (1083, 769), (1084, 768), (1084, 767), (1085, 766), (1086, 766), (1087, 766), (1088, 766), (1089, 766), (1090, 766), (1091, 766), (1092, 766), (1093, 766), (1094, 766), (1095, 766), (1096, 766), (1097, 766), (1098, 766), (1099, 767), (1100, 767), (1101, 767), (1102, 767), (1103, 767), (1104, 767), (1105, 767), (1106, 767), (1107, 767), (1108, 767), (1109, 767), (1110, 767), (1111, 767), (1112, 767), (1113, 767), (1114, 767), (1115, 768), (1116, 768), (1117, 768), (1118, 768), (1119, 768), (1120, 768), (1121, 768), (1122, 768), (1123, 768), (1124, 768), (1125, 768), (1126, 768), (1127, 768), (1128, 768), (1129, 768), (1130, 768), (1131, 768), (1132, 768), (1133, 768), (1134, 769), (1135, 769), (1136, 769), (1137, 769), (1138, 769), (1139, 769), (1140, 769), (1141, 769), (1142, 769), (1143, 769), (1144, 769), (1145, 769), (1146, 769), (1147, 770), (1148, 770), (1149, 770), (1150, 770), (1151, 770), (1152, 770), (1153, 770), (1154, 770), (1155, 770), (1156, 771), (1157, 771), (1158, 771), (1159, 771), (1160, 771), (1161, 771), (1162, 771), (1163, 771), (1164, 771), (1165, 771), (1166, 771), (1167, 771), (1168, 771), (1169, 771), (1170, 771), (1171, 771), (1172, 771), (1173, 772), (1174, 772), (1175, 772), (1176, 772), (1177, 772), (1178, 772), (1179, 772), (1180, 772), (1181, 772), (1182, 772), (1183, 772), (1184, 772), (1185, 772), (1186, 772), (1187, 772), (1188, 772), (1189, 772), (1190, 773), (1191, 773), (1192, 773), (1193, 773), (1194, 773), (1195, 773), (1196, 773), (1197, 773), (1198, 773), (1199, 773), (1200, 773), (1201, 773), (1202, 773), (1203, 774), (1204, 774), (1205, 774), (1206, 774), (1207, 774), (1208, 774), (1209, 774), (1210, 774), (1211, 774), (1212, 774), (1213, 774), (1214, 774), (1215, 774), (1216, 774), (1217, 775), (1218, 775), (1219, 775), (1220, 775), (1221, 775), (1222, 775), (1223, 775), (1224, 775), (1225, 775), (1226, 775), (1227, 776), (1228, 776), (1229, 776), (1230, 776), (1231, 776), (1232, 776), (1233, 776), (1234, 776), (1235, 776), (1236, 776), (1237, 776), (1238, 776), (1239, 776), (1240, 776), (1241, 776), (1242, 777), (1243, 777), (1244, 777), (1245, 777), (1246, 777), (1247, 777), (1248, 777), (1249, 777), (1250, 777), (1251, 777), (1252, 777), (1253, 777), (1254, 777), (1255, 777), (1256, 777), (1257, 777), (1258, 777), (1259, 777), (1260, 777), (1261, 778), (1262, 778), (1263, 778), (1264, 778), (1265, 778), (1266, 778), (1267, 778), (1268, 778), (1269, 778), (1270, 778), (1271, 779), (1272, 779), (1273, 780), (1274, 781), (1274, 782), (1274, 783), (1274, 784), (1274, 785), (1274, 786), (1274, 787), (1273, 788), (1273, 789), (1273, 790), (1273, 791), (1273, 792), (1273, 793), (1272, 794), (1272, 795), (1272, 796), (1272, 797), (1272, 798), (1272, 799), (1271, 800), (1271, 801), (1271, 802), (1271, 803), (1271, 804), (1271, 805), (1271, 806), (1271, 807), (1271, 808), (1270, 809), (1270, 810), (1270, 811), (1270, 812), (1270, 813), (1270, 814), (1270, 815), (1270, 816), (1270, 817), (1269, 818), (1269, 819), (1269, 820), (1269, 821), (1269, 822), (1269, 823), (1269, 824), (1269, 825), (1269, 826), (1269, 827), (1269, 828), (1269, 829), (1268, 830), (1268, 831), (1268, 832), (1268, 833), (1268, 834), (1268, 835), (1268, 836), (1268, 837), (1268, 838), (1268, 839), (1268, 840), (1267, 841), (1267, 842), (1267, 843), (1267, 844), (1267, 845), (1267, 846), (1267, 847), (1267, 848), (1267, 849), (1267, 850), (1267, 851), (1267, 852), (1267, 853), (1267, 854), (1267, 855), (1267, 856), (1267, 857), (1267, 858), (1267, 859), (1267, 860), (1267, 861), (1267, 862), (1267, 863), (1267, 864), (1267, 865), (1267, 866), (1267, 867), (1267, 868), (1267, 869), (1267, 870), (1267, 871), (1267, 872), (1267, 873), (1267, 874), (1267, 875), (1267, 876), (1267, 877), (1267, 878), (1267, 879), (1267, 880), (1267, 881), (1267, 882), (1267, 883), (1267, 884), (1267, 885), (1267, 886), (1267, 887), (1267, 888), (1267, 889), (1266, 890), (1266, 891), (1266, 892), (1266, 893), (1266, 894), (1266, 895), (1265, 896), (1265, 897), (1265, 898), (1265, 899), (1264, 900), (1264, 901), (1264, 902), (1263, 903), (1263, 904), (1263, 905), (1263, 906), (1263, 907), (1262, 908), 
# (1262, 909), (1262, 910), (1262, 911), (1262, 912), (1262, 913), (1262, 914), (1262, 915), (1261, 916), (1261, 917), (1261, 918), (1261, 919), (1261, 920), (1261, 921), (1261, 922), (1260, 923), (1260, 924), (1260, 925), (1260, 926), (1260, 927), (1259, 928), (1259, 929), (1259, 930), (1259, 931), (1259, 932), (1259, 933), (1259, 934), (1258, 935), (1258, 936), (1258, 937), (1258, 938), (1258, 939), (1258, 940), (1258, 941), (1258, 942), (1258, 943), (1257, 944), (1257, 945), (1257, 946), (1257, 947), (1257, 948), (1257, 949), (1257, 950), (1257, 951), (1257, 952), (1257, 953), (1257, 954), (1257, 955), (1257, 956), (1256, 957), (1256, 958), (1256, 959), (1256, 960), (1256, 961), (1256, 962), (1256, 963), (1256, 964), (1256, 965), (1256, 966), (1256, 967), (1256, 968), (1256, 969), (1256, 970), (1256, 971), (1256, 972), (1255, 973), (1255, 974), (1255, 975), (1255, 976), (1255, 977), (1255, 978), (1255, 979), (1255, 980), (1255, 981), (1255, 982), (1255, 983), (1255, 984), (1255, 985), (1255, 986), (1255, 987), (1254, 988), (1254, 989), (1254, 990), (1254, 991), (1254, 992), (1254, 993), (1254, 994), (1254, 995), (1254, 996), (1254, 997), (1254, 998), (1254, 999), (1253, 1000), (1253, 1001), (1253, 1002), (1253, 1003), (1253, 1004), (1253, 1005), (1253, 1006), (1253, 1007), (1253, 1008), (1253, 1009), (1253, 1010), (1253, 1011), (1253, 1012), (1253, 1013), (1253, 1014), (1253, 1015), (1253, 1016), (1252, 1017), (1252, 1018), (1252, 1019), (1252, 1020), (1252, 1021), (1252, 1022), (1252, 1023), (1252, 1024), (1252, 1025), (1252, 1026), (1252, 1027), (1252, 1028), (1252, 1029), (1252, 1030), (1252, 1031), (1252, 1032), (1251, 1033), (1251, 1034), (1251, 1035), (1251, 1036), (1250, 1036), (1249, 1036), (1248, 1037), (1549, 1069), (1549, 1068), (1549, 1067), (1550, 1066), (1550, 1065), (1551, 1064), (1552, 1063), (1552, 1062), (1553, 1061), (1553, 1060), (1554, 1059), (1555, 1058), (1556, 1057), (1557, 1056), (1558, 1055), (1559, 1054), (1560, 1053), (1561, 1052), (1562, 1051), (1562, 1052), (1561, 1053), (1560, 1054), (1559, 1055), (1558, 1056), (1557, 1057), (1556, 1058), (1555, 1059), (1554, 1060), (1553, 1061), (1553, 1062), (1552, 1063), (1552, 1064), (1551, 1065), (1550, 1066), (1550, 1067), (1549, 1068)]
# obstacles =[(149, 208), (148, 209), (147, 210), (146, 211), (146, 212), (145, 213), (144, 214), (144, 215),
#               (143, 216), (142, 217), (142, 218), (141, 219), (140, 220), (139, 221), (138, 222), (138, 223),
#                 (137, 224), (136, 225), (136, 226), (135, 227), (134, 228), (133, 229), (133, 230), (132, 231),
#                   (131, 232), (130, 233), (129, 234), (129, 235), (128, 236), (127, 237), (127, 238), (126, 239),
#                     (126, 240), (125, 241), (124, 242), (124, 243), (123, 244), (122, 245), (122, 246), (121, 247), 
#                     (120, 248), (120, 249), (119, 250), (119, 251), (118, 252), (117, 253), (117, 254), (116, 255), 
#                     (115, 256), (115, 257), (114, 258), (113, 259), (113, 260), (112, 261), (111, 262), (111, 263),
#                       (110, 264), (110, 265), (109, 266), (108, 267), (108, 268), (107, 269), (107, 270), (106, 271),
#                         (107, 272), (107, 273), (108, 274), (109, 275), (110, 276), (111, 277), (112, 277), (113, 278),
#                           (114, 279), (115, 279), (116, 279), (117, 279), (118, 279), (119, 278), (120, 277), (120, 276),
#                             (121, 275), (122, 274), (122, 273), (123, 272), (124, 271), (125, 270), (125, 269), (126, 268),
#                               (126, 267), (127, 266), (128, 265), (128, 264), (129, 263), (130, 262), 
# (131, 261), (131, 260), (132, 259), (133, 258), (133, 257), (134, 256), (135, 255), (135, 254), (136, 253), 
# (137, 252), (138, 251), (139, 250), (139, 249), (140, 248), (141, 247), (142, 246), (142, 245), (143, 244), 
# (144, 243), (145, 242), (146, 241), (146, 240), (147, 239), (148, 238), (149, 237), (149, 236), (150, 235), 
# (151, 234), (152, 233), (153, 232), (154, 232), (155, 233), (156, 233), (157, 234), (158, 235), (159, 236), 
# (160, 236), (161, 237), (162, 238), (163, 239), (164, 240), (165, 240), (166, 241), (167, 242), (168, 243), 
# (169, 244), (170, 245), (171, 246), (172, 247), (173, 247), (174, 248), (175, 249), (176, 250), (177, 251), 
# (178, 251), (179, 252), (180, 253), (181, 254), (182, 255), (183, 255), (184, 256), (185, 257), (186, 258),
#  (187, 258), (188, 259), (189, 260), (190, 261), (191, 262), (192, 262), (193, 263), (194, 264), (195, 265),
#    (196, 265), (197, 266), (198, 267), (199, 268), (200, 269), (201, 268), (202, 268), (203, 268), (204, 268),
#      (205, 267), (205, 266), (206, 265), (207, 264), (208, 263), (208, 262), (209, 261), (210, 260), (211, 259),
#        (211, 258), (211, 257), (211, 256), (211, 255), (210, 254), (209, 253), (208, 252), (207, 251), (206, 250),
#          (205, 250), (204, 249), (203, 248), (202, 247), (201, 247), (200, 246), (199, 245), (198, 245), (197, 244),
#            (196, 243), (195, 242), (194, 241), (193, 241), (192, 240), 
# (191, 239), (190, 238), (189, 238), (188, 237), (187, 236), (186, 235), (185, 234), (184, 234), (183, 233), 
# (182, 232), (181, 231), (180, 230), (179, 230), (178, 229), (177, 228), (176, 227), (175, 226), (174, 226), 
# (173, 225), (172, 224), (171, 223), (170, 222), (169, 221), (168, 220), (167, 220), (166, 219), (165, 218), 
# (164, 217), (163, 216), (162, 215), (161, 214), (160, 213), (159, 213), (158, 212), (157, 211), (156, 210), (155, 210),
#  (154, 209), (153, 208), (376, 36), (375, 37), (374, 37), (373, 37), (372, 37), (371, 37), (370, 37), (369, 38), (368, 38), (367, 38),
#              (366, 38), (365, 38), (364, 39), (363, 39), (362, 39), (361, 39), (360, 40), (359, 40), (358, 40), (357, 40),
#                (356, 40), (355, 41), (354, 41), (353, 41), (352, 41), (351, 41), (350, 41), (349, 42), (348, 42), (347, 42),
#                  (346, 42), (345, 42), (344, 43), (343, 43), (342, 43), (341, 43), (340, 43), (339, 43), (338, 44), (337, 44),
#                    (336, 44), (335, 44), (334, 44), (333, 44), (332, 44), (331, 44), (330, 44), (329, 44), (328, 44), (327, 44),
#                      (326, 44), (325, 44), (324, 44), (323, 44), (322, 44), (321, 44), (320, 44), (319, 44), (318, 44), (317, 44),
#                        (316, 45), (315, 45), (314, 45), (313, 45), (312, 45), (311, 45), (310, 45), (309, 45), (308, 45), (307, 45),
#                          (306, 45), (305, 45), (304, 45), (303, 45), (302, 45), (301, 45), (300, 45), (299, 46), (298, 46), (297, 46),
#                            (297, 47), (296, 48), (296, 49), (296, 50), (296, 51), (296, 52), (296, 53), (296, 54), (296, 55), (296, 56),
#                              (296, 57), (296, 58), (296, 59), (296, 60), (296, 61), (296, 62), (296, 63), (296, 64), (296, 65), (296, 66),
#                                (296, 67), (297, 68), (297, 69), (297, 70), (297, 71), (297, 72), (297, 73), (297, 74), (297, 75), (297, 76),
#                                  (297, 77), (297, 78), (297, 79), (297, 80), (297, 81), (297, 82), (297, 83), (297, 84), (297, 85), (297, 86),
#                                    (297, 87), (297, 88), (297, 89), (297, 90), (297, 91), (297, 92), (297, 93), (297, 94), (297, 95), (297, 96),
#                                      (297, 97), (297, 98), (297, 99), (297, 100), (297, 101), (297, 102), (297, 103), (297, 104), (297, 105), 
#                                      (297, 106), (297, 107), (296, 108), (296, 109), (296, 110), (296, 111), (296, 112), (296, 113), (296, 114),
#                                        (296, 115), (296, 116), (296, 117), (297, 118), (297, 119), (297, 120), (297, 121), (297, 122), (297, 123),
#                                          (297, 124), (297, 125), (297, 126), (297, 127), (297, 128), (297, 129), (297, 130), (297, 131), (297, 132),
#                                            (297, 133), (297, 134), (297, 135), (297, 136), (297, 137), (297, 138), (297, 139), (297, 140), (297, 141),
#                                              (297, 142), (297, 143), (297, 144), (297, 145), (297, 146), (297, 147), (297, 148), (297, 149), (297, 150),
#                                                (297, 151), (297, 152), (297, 153), (297, 154), (297, 155), (297, 156), (297, 157), (297, 158), (297, 159),
#                                                  (297, 160), (297, 161), (297, 162), (298, 163), (298, 164), (298, 165), (299, 165), (300, 165), (301, 166),
#                                                    (302, 166), (303, 166), (304, 166), (305, 166), (306, 165), (307, 165), (308, 165), (309, 165), (310, 165),
#                                                      (311, 165), (312, 165), (313, 165), (314, 165), (315, 165), (316, 165), (317, 165), (318, 165), (319, 165),
#                                                        (320, 165), (321, 165), (322, 165), (323, 165), (324, 165), (325, 165), (326, 165), (327, 165), (328, 165),
#                                                          (329, 165), (330, 165), (331, 164), (332, 164), (333, 164), (334, 164), (335, 164), (336, 164), (337, 164),
#                                                            (338, 164), (339, 164), (340, 164), (341, 164), (342, 164), (343, 164), (344, 164), (345, 164), (346, 164),
#                                                              (347, 164), (348, 164), (349, 164), (350, 164), (351, 164), (352, 164), (353, 164), (354, 164), (355, 164),
#                                                                (356, 164), (357, 163), (358, 163), (359, 163), (360, 163), (361, 163), (362, 163), (363, 163), (364, 163),
#                                                                  (365, 163), (366, 163), (367, 163), (368, 163), (369, 163), (370, 163), (371, 163), (372, 163), (373, 163),
#                                                                    (374, 163), (375, 163), (376, 163), (377, 163), (378, 163), (379, 163), (380, 162), (381, 162), (382, 161),
#                                                                      (382, 160), (382, 159), (382, 158), (382, 157), (382, 156), (382, 155), (382, 154), (382, 153), (382, 152),
#                                                                        (382, 151), (382, 150), (382, 149), (382, 148), (382, 147), (382, 146), (382, 145), (382, 144), (382, 143),
#                                                                          (382, 142), (382, 141), (382, 140), (382, 139), (382, 138), (382, 137), (382, 136), (382, 135), (382, 134), (382, 133), (382, 132), (382, 131), (382, 130), (382, 129), (382, 128), (382, 127), (382, 126), (382, 125), (382, 124), (382, 123), (382, 122), (382, 121), (382, 120), (382, 119), (382, 118), (382, 117), (382, 116), (382, 115), (383, 114), (382, 113), (382, 112), (382, 111), (382, 110), (382, 109), (382, 108), (382, 107), (382, 106), (382, 105), (382, 104), (382, 103), (382, 102), (382, 101), (382, 100), (382, 99), (382, 98), (382, 97), (382, 96), (382, 95), (382, 94), (382, 93), (382, 92), (382, 91), (382, 90), (382, 89), (382, 88), (382, 87), (382, 86), (382, 85), (382, 84), (382, 83), (382, 82), (382, 81), (382, 80), (382, 79), (382, 78), (382, 77), (382, 76), (382, 75), (382, 74), (381, 73), (381, 72), (381, 71), (381, 70), (381, 69), (381, 68), (381, 67), (381, 66), (381, 65), (381, 64), (381, 63), (381, 62), (381, 61), (381, 60), (381, 59), (381, 58), (381, 57), (381, 56), (381, 55), (381, 54), (381, 53), (381, 52), (381, 51), (380, 50), (380, 49), (380, 48), (380, 47), (380, 46), (380, 45), (380, 44), (380, 43), (380, 42), (380, 41), (380, 40), (380, 39), (379, 38), (379, 37), (379, 36), 

# (137, 30), (136, 31), (135, 31), (134, 31), (133, 32), (132, 32), (131, 32), (130, 33), (129, 33), (128, 34), (127, 34), (126, 35), (125, 35), (124, 36),
#  (123, 37), (122, 38), (121, 39), (120, 40), (119, 41), (118, 42), (117, 43), (117, 44), (116, 45), (115, 46), (115, 47), (114, 48), (114, 49), (113, 50),
#    (113, 51), (112, 52), (112, 53), (111, 54), (110, 55), (110, 56), (109, 57), (108, 58), (107, 59), (107, 60), (107, 61), (107, 62), (106, 63), (106, 64),
#      (106, 65), (107, 66), (107, 67), (107, 68), (107, 69), (108, 70), (108, 71), (109, 72), (109, 73), (110, 74), (111, 75), (112, 76), (112, 77), (113, 78),
#        (114, 79), (115, 80), (116, 81), (117, 82), (118, 82), (119, 83), (120, 84), (121, 85), (122, 86), (123, 87), (124, 87), (125, 88), (126, 88), (127, 89),
#          (128, 89), (129, 89), (130, 90), (131, 90), (132, 90), (133, 91), (134, 91), (135, 91), (136, 91), (137, 91), (138, 91), (139, 91), (140, 90), (141, 90),
#            (142, 90), (143, 90), (144, 90), (145, 89), (146, 89), (147, 89), (148, 88), (149, 88), (150, 88), (151, 87), (152, 87), (153, 87), (154, 86), (155, 85),
#              (156, 84), (157, 83), (158, 82), (159, 81), (160, 80), (160, 79), (161, 78), (162, 77), (162, 76), (163, 75), (163, 74), (163, 73), (164, 72), (164, 71),
#                (164, 70), (164, 69), (165, 68), (165, 67), (165, 66), (165, 65), (166, 64), (166, 63), (166, 62), (166, 61), (166, 60), (166, 59), (166, 58), (166, 57),
#                  (166, 56), (166, 55), (166, 54), (166, 53), (165, 52), (165, 51), (165, 50), (165, 49), (164, 48), (163, 47), (163, 46), (162, 45), (161, 44), (161, 43),
#                    (160, 42), (159, 41), (158, 40), (157, 39), (156, 38), (155, 37), (154, 36), (153, 35), (152, 34), (151, 33), (150, 33), (149, 32), (148, 32), (147, 31),
#                      (146, 31), (145, 31), (144, 31), (143, 30)]

# Compute the path and potential values

from aruco_obstacle_detection import detect_aruco_and_obstacles

# _ ,obstacles, _ = detect_aruco_and_obstacles()
# path, potential_values = apf_path_planning(start, goal, obstacles)

# # Plot the results
# plt.figure(figsize=(6,11))
# plt.plot(path[:, 0], path[:, 1], "b.-", label="Smoothed Path")
# plt.scatter(*zip(*obstacles), color="red", label="Obstacles")
# plt.scatter(*goal, color="green", marker="x", s=100, label="Goal")
# plt.scatter(*start, color="black", marker="o", label="Start")
# plt.legend()
# plt.grid()
# plt.title("Artificial Potential Field Path Planning with Smoothing")
# # plt.show()

# # Plot the potential field evolution
# plt.figure()
# plt.plot(potential_values, "r-", label="Potential Field Value")
# plt.xlabel("Step")
# plt.ylabel("Potential")
# plt.title("Potential Field over Steps")
# plt.legend()
# plt.grid()
# plt.show()
